{% extends request.is_ajax|yesno:'nullcont.htm,abonapp/ext.htm' %}
{% load i18n %}
{% block content %}

    <div class="row">
        <div class="col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">График использования</h3>
                </div>
                <div class="panel-body">
                    {% if charts_data %}
                        <div id="chrt"></div>
                        <script type="text/javascript">
                            $(document).ready(function ($) {
                                new Chartist.Line('#chrt', {
                                    series: [
                                        {
                                            name: 'График траффика',
                                            data: [
                                                {{ charts_data }}
                                            ]
                                        }
                                    ]
                                }, {
                                    height: '600px',
                                    showArea: true,
                                    showLine: false,
                                    showPoint: false,
                                    high: {{ high }},
                                    axisX: {
                                        type: Chartist.FixedScaleAxis,
                                        divisor: 12,
                                        labelInterpolationFnc: function (value) {
                                            return moment(value).format('HH:mm:ss');
                                        }
                                    },
                                    axisY: {
                                        labelInterpolationFnc: function (value) {
                                            return value + ' MBit/s';
                                        }
                                    }
                                });
                            });
                        </script>
                    {% else %}
                        <h2>Данные не переданы</h2>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% endblock %}
